<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6"
      crossorigin="anonymous"
    />
    <script src="https://smtpjs.com/v3/smtp.js"></script>
  <script>
    //Can be any valid email address
    const representative_email = "hackerutestmail@gmail.com"; 
    //Must not be changed.
    const main_email = "hackerutestmail@gmail.com";

    const MIN_NAME_LENGTH = 5;

    $ = document.querySelector.bind(document);
    async function sendEmail(e) {
      const $name = $('#name');
      const name = $name.value;
      if (name.length < MIN_NAME_LENGTH) 
        return $name.setCustomValidity(`Full name must be at least ${MIN_NAME_LENGTH} characters long`);
      if (!name.match(/^[a-zA-Z]+\s[a-zA-Z]+$/))  
        return $name.setCustomValidity(`Full name must consist of a valid first name and last name`);
      $name.setCustomValidity("");
      const email = $('#email').value;
      const $form = $('#form');
      if (!$form.checkValidity()) return $form.reportValidity();
      try {
        await Email.send({
        SecureToken: "CFDFC10F-7ACA-4E1B-9E3D-CEB356B8B1E9",
        To : representative_email,
        From : main_email,
        Subject : "Customer details",
        Body : `Full name: ${name}, email: ${email}`});
        alert("A representative will get back to you in the next 24 hours");
      } catch (e) {
        alert("Something went wrong!");
      }
    }
  </script>
    <title>Lorem Ipsum</title>
  </head>
  <body>
    <div class="content m-5">
      <div class="row bg-light">
        <p class="text-center fs-1">The Lorem Ipsum Company<p>
      </div>
      <div class="row">
        <div class="col-xs-8 col-md-8 sm-12">
          <p>
            Lorem ipsum dolor sit amet consectetur, adipisicing elit.
            Necessitatibus illo ex ipsa exercitationem id reiciendis dignissimos
            quidem officia, distinctio quibusdam possimus facilis ipsam totam.
            Voluptas possimus amet, incidunt nihil suscipit corporis molestias,
            voluptatibus inventore, optio maiores tempore? Expedita eveniet
            voluptas asperiores adipisci accusamus rerum, reprehenderit iure
            velit, atque quam nobis.
          </p>
          <p>
            Quia quod veniam iste fugiat unde error fugit quam necessitatibus,
            mollitia sequi tenetur delectus nihil sapiente voluptate
            reprehenderit. Qui, non cumque rem asperiores odio corrupti
            deserunt, sit laudantium alias nemo sequi obcaecati exercitationem
            voluptatibus excepturi natus id fugit ad, dolorem mollitia unde
            officia eius? Accusamus, aut dolorem? Possimus, officiis porro.
          </p>
          <p>
            Rerum tempore odit architecto ducimus vero fugit distinctio
            consequuntur deleniti, nisi facilis fuga obcaecati vel blanditiis
            sapiente ab. Quos cupiditate ab iste, placeat perspiciatis magnam
            laboriosam cum sint sequi nam atque vitae doloremque dignissimos
            labore voluptate quod doloribus quibusdam facilis repudiandae.
            Voluptatum dolorem doloremque id! Reprehenderit error perspiciatis
            ducimus assumenda?
          </p>
        </div>
        <div class="col-xs-4 col-md-4 sm-4">
          <h3>Leave your details here and we will get back to you soon</h3>
          <form id="form" class="border border-primary p-3">
            <div class="mb-3">
              <label for="name" class="form-label">Full Name:</label>
              <input type="text" class="form-control" id="name" required
              />
            </div>
            <div class="mb-3">
              <label for="email" class="form-label">Email address:</label>
              <input type="email" class="form-control" id="email" required />
            </div>
            <button type="button" onclick="sendEmail()" class="btn btn-primary">Send</button>
          </form>
        </div>
        
      </div>
    </div>
  </body>
</html>
